# Data Streams - Streams Direct implementation - WebSocket (TypeScript)

## Prerequisites

- Install [git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git). Run `git --version` to check the installation.
- Install [Nodejs](https://nodejs.org/en/) version 16 or later.

## Set up

- Clone the repository.

- Copy the .env.example file to .env and fill in the values.

  ```
  cp .env.example .env
  ```

- Install all dependencies:

  ```
  npm install
  ```

- Compile the TypeScript code:

  ```
  npm run build
  ```

## Establish a WebSocket connection and listen for real-time reports

Run the following command to listen to a single feed (e.g. for ETH / USD on testnets):

```
node dist/connect.js 0x000359843a543ee2fe414dc14c7e7920ef10f4372990b79d6361cdc0dd1ba782
```

Expect output similar to:

```
Received message: {"report":{"feedID":"0x00036fe43f87884450b4c7e093cd5ed99cac6640d8c2000e6afc02c8838d0265","fullReport":"0x00060a2676459d14176b64106fcf3246631d3a03734171737eb082fe79c956e00000000000000000000000000000000000000000000000000000000027374c11000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002800101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012000036fe43f87884450b4c7e093cd5ed99cac6640d8c2000e6afc02c8838d0265000000000000000000000000000000000000000000000000000000006634c31b000000000000000000000000000000000000000000000000000000006634c31b00000000000000000000000000000000000000000000000000001ea01cc2f8f0000000000000000000000000000000000000000000000000001a3cb22a233a74000000000000000000000000000000000000000000000000000000006636149b000000000000000000000000000000000000000000000000bbea9a67bdd55000000000000000000000000000000000000000000000000000bbe70945c67a9000000000000000000000000000000000000000000000000000bbee2c7289d520000000000000000000000000000000000000000000000000000000000000000002b0ad3670a915b7661d7ddfc679385285feaf353d5e1e4ca2e88320ac3652e087d9f4b4dd119bac28ae02f3eb2fcf794deb14bc1a7d79143426ee7e610be22b2400000000000000000000000000000000000000000000000000000000000000025dd0d7fab871237210395dcf406f5da9e9c05c56e553cc73e3d475a0c422441611ee2e166703c4cfc31e6abf34c7d790529fd0e43b5f77ecc75cac18c6399ace"}}
```

- The first value is the feed ID.

- The second value is the `FullReport` payload in hexadecimal.

**Note:** You can listen to multiple feeds by providing the feed IDs as command line arguments separated by spaces. E.g. for ETH / USD and LINK / USD on testnets:

```
node dist/connect.js 0x000359843a543ee2fe414dc14c7e7920ef10f4372990b79d6361cdc0dd1ba782 0x00036fe43f87884450b4c7e093cd5ed99cac6640d8c2000e6afc02c8838d0265
```

## Decode a report

Use the following command to decode a report:

```
node dist/decode.js <HexPayload>
```

Where `<HexPayload>` is the hexadecimal payload received in the message.
